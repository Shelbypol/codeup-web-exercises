<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Mapbox API LEC</title>

        <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>
        <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet' />
        <style>
            #map{
                width: 400px;
                height: 300px;
            }
        </style>
    </head>
    <body>
<!--  MAP API  -->
    <div id='map' ></div>
<script src='js/keys.js'></script>
<script src="js/mapbox-geocode-utilities.js"></script>
    <script>

        //begin iife
        // (function() {

        //avoid putting API keys on github
        //bots that scrap git hub and search for things that look like api keys to steal
        //prevent keys from getting push up to github DO NOT PUSH UP KEYS
        //create second js file that will not get pushed to github
        mapboxgl.accessToken = MAPBOX_KEY;
        var map = new mapboxgl.Map({
            container: 'map', //corresponds to html id
            style: 'mapbox://styles/mapbox/streets-v9',
            zoom: 8,
            center: [-68.922267, 45.9044906]
        });

        //======MARKER
        //create
        var marker = new mapboxgl.Marker();
        //where it's going to sit
        //method chain
        marker
            .setLngLat([-68.922267, 45.9044906])
            .addTo(map);

        marker.setDraggable(true);

        //======POPUP

        var popup = new mapboxgl.Popup();

        popup.setHTML('<h2>End of the AT!</h2>');

        marker.setPopup(popup);

        //events
        map.on('click', function () {
            console.log('hello');
        })

        //===========GEO-CODING

geocode('600 Navarro St #350, San Antonio, Tx 78205', mapboxKey).then(function (result) {
    console.log(result);
    map.setCenter(result);
    map.setZoom(18);
});

        reverseGeocode({lng: -98.4861, lat: 29.4260}, mapboxKey).then(function (results) {
            console.log(results);
        })

        // })(); //end iife
    </script>
    <script></script>
    </body>
</html>